# 智慧水域-数据大屏-综合业务

描述:

> 业务总览、

**字段描述**：

business_type：(业务总览)

```bash
(1, u"水面保洁"),
(2, u"切割打捞"),
(3, u"水质检测"),
(4, u"水下探测"),
(5, u"试剂投放"),
(6, u"智能巡河")
```

cleaning_type:（水面保洁业务）

```bash
(1, u"水上植物"),
(2, u"生活垃圾"),
(3, u"油污收集"),
(4, u"水下植物")
```

## 业务总览：

> 当前接口总共业务类型目前那有6种，如果近返回3种，那么前端需要用0来进行补充。

### 接口地址：/v1/pc/business/overall/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名     | 备注                     |
| ---------- | ---- | -------- | -------- | ------------------------ |
| year       | INT  | 否       | 筛选年份 | 默认是当年               |
| month      | INT  | 否       | 筛选月份 | 默认是当月               |
| projectIds | LIST | 是       | 项目ID   | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
    "projectIds": [3,4],
    "month": 9,
    "year": 2020
}
```

### 响应

#### 200

```bash
{
    "data": {
        "patrolRiver": 1, // 智能巡河
        "cut": 0, // 切割/打捞
        "reagent": 0,  // 试剂投放
        "detect": 0, // 水下探测
        "cleaning": 0,  // 水面保洁
        "quality": 0  // 水质检测
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 业务总览详情：

### 接口地址：v1/pc/business/overall/list/

### 请求方式：POST

### 请求参数：

| 参数名       | 类型   | 是否必传 | 命名       | 备注 |
| ------------ | ------ | -------- | ---------- | ---- |
| businessType | INT    | 否       | 业务员类型 | 筛选 |
| provinceId   | INT    | 否       | 省份ID     | 筛选 |
| cityId       | INT    | 否       | 市ID       | 筛选 |
| areaId       | INT    | 否       | 区域ID     | 筛选 |
| townId       | INT    | 否       | 镇ID       | 筛选 |
| villageId    | INT    | 否       | 乡ID       | 筛选 |
| watersId     | INT    | 否       | 水域ID     | 筛选 |
| sTime        | STRING | 否       | 开始时间   | 筛选 |
| eTime        | STRING | 否       | 结束时间   | 筛选 |
| projectIds   | LIST   | 是       | 项目ID     |      |

### 请求示例:

* 

### 响应

#### 200

```bash
// 具体字段查看详情信息
{
    "data": {
        "count": 1,
        "list": [
            {
                "id": 1,
                "amount": "66.55", // 合同价钱
                "num": "1232132132",  // 项目编号
                "name": "项目名册",  // 项目名称
                "businessType": 1, // 业务类型
                "projectType": 1,  // 项目类型
                "areas": "123",  // 面积
                "distance": "1233",  // 距离
                "provinceInfo": {  // 省份信息
                    "id": 1,
                    "name": "浙江省"
                },
                "cityInfo": {  // 市区信息
                    "id": 1,
                    "name": "杭州市"
                },
                "areaInfo": {  // 区域信息
                    "id": 1,
                    "name": "萧山区"
                },
                "townInfo": {},  // 城镇信息
                "villageInfo": {},  // 乡镇信息
                "saleInfo": {  // 销售信心
                    "mobile": "13069634825",
                    "id": 1,
                    "name": "吕品品123"
                },
                "ownerInfo": {   // 业主信息
                    "mobile": "13069634826",
                    "id": 1,
                    "name": "吕品品123"
                },
                "shipInfo": {  // 船相关信息
                    "id": 2,
                    "number": "0003"
                },
                "watersInfo": {  // 水域信息
                    "id": 1,
                    "name": "西湖"
                },
                "sTime": "1627747200.000000",  // 开始日期
                "eTime": "1628179200.000000"  // 结束日期
            }
        ],
        "links": {
            "previous": null,
            "next": null
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 保洁总览(默认年总览)：

> 当前接口返回4中类型

### 接口地址：/v1/pc/cleaning/overall/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名     | 备注                     |
| ---------- | ---- | -------- | -------- | ------------------------ |
| year       | INT  | 否       | 筛选年份 | 默认是当年               |
| projectIds | LIST | 是       | 项目ID   | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
    "projectIds": [3,4],
    "month": 9,
    "year": 2020
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "cleaning_type__count": 30, // 数量
            "cleaning_type": 1  // 保洁类型
        },
        {
            "cleaning_type__count": 25,
            "cleaning_type": 2
        },
        {
            "cleaning_type__count": 10,
            "cleaning_type": 3
        },
        {
            "cleaning_type__count": 19,
            "cleaning_type": 4
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 保洁总览(日筛选)：

> 当前接口返回4中类型

### 接口地址：/v1/pc/day/cleaning/overall/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注                     |
| ---------- | ---- | -------- | ------ | ------------------------ |
| date       | STR  | 是       | 筛选日 | 必传                     |
| projectIds | LIST | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
    "projectIds": [3,4],
    "date":"2021-07-03"
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "cleaning_type__count": 30, // 数量
            "cleaning_type": 1  // 保洁类型
        },
        {
            "cleaning_type__count": 25,
            "cleaning_type": 2
        },
        {
            "cleaning_type__count": 10,
            "cleaning_type": 3
        },
        {
            "cleaning_type__count": 19,
            "cleaning_type": 4
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 保洁总览(月筛选)：

> 当前接口返回4中类型

### 接口地址：/v1/pc/month/cleaning/overall/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注                     |
| ---------- | ---- | -------- | ------ | ------------------------ |
| month      | INT  | 是       | 筛选月 | 必传                     |
| year       | INT  | 是       | 筛选年 | 必传                     |
| projectIds | LIST | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
    "projectIds": [3,4],
    "month": 7,
    "year": 2021
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "num": 2, // 数量
            "s_time": "07-30" // 月份
        },
        {
            "num": 1,
            "s_time": "07-29"
        },
        {
            "num": 1,
            "s_time": "07-31"
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 保洁总览(年筛选)：

> 当前接口返回4中类型

### 接口地址：/v1/pc/year/cleaning/overall/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注                     |
| ---------- | ---- | -------- | ------ | ------------------------ |
| year       | INT  | 是       | 筛选年 | 必传                     |
| projectIds | LIST | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
    "projectIds": [3,4],
    "year": 2021
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "num": 80, // 数量
            "s_time": "2021-07" // 月份
        },
        {
            "num": 1,
            "s_time": "2021-09"
        },
        {
            "num": 2,
            "s_time": "2021-08"
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 保洁详情：

### 接口地址：v1/pc/cleaning/overall/list/

### 请求方式：POST

### 请求参数：

| 参数名       | 类型   | 是否必传 | 命名     | 备注 |
| ------------ | ------ | -------- | -------- | ---- |
| cleaningType | INT    | 否       | 保洁类型 | 筛选 |
| provinceId   | INT    | 否       | 省份ID   | 筛选 |
| cityId       | INT    | 否       | 市ID     | 筛选 |
| areaId       | INT    | 否       | 区域ID   | 筛选 |
| townId       | INT    | 否       | 镇ID     | 筛选 |
| villageId    | INT    | 否       | 乡ID     | 筛选 |
| watersId     | INT    | 否       | 水域ID   | 筛选 |
| sTime        | STRING | 否       | 开始时间 | 筛选 |
| eTime        | STRING | 否       | 结束时间 | 筛选 |
| projectIds   | LIST   | 是       | 项目ID   |      |

### 请求示例:

* 

### 响应

#### 200

```bash
// 具体查看详情接口
{
    "data": {
        "count": 6,
        "list": [
            {
                "id": 6,
                "provinceInfo": {
                    "id": 1,
                    "name": "浙江省"
                },
                "cityInfo": {
                    "id": 1,
                    "name": "杭州市"
                },
                "areaInfo": {
                    "id": 1,
                    "name": "萧山区"
                },
                "townInfo": {},
                "villageInfo": {},
                "shipInfo": {
                    "id": 2,
                    "number": "0003"
                },
                "watersInfo": {
                    "id": 1,
                    "name": "西湖"
                },
                "userInfo": {
                    "mobile": "13069634822",
                    "id": 4,
                    "name": "吕品品"
                },
                "sTime": "1627747200.000000",
                "eTime": "1630512000.000000",
                "category": 11,
                "cleaningType": 1,
                "areas": "666",
                "distance": "123",
                "weight": "1232"
            },
        ],
        "links": {
            "previous": null,
            "next": null
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 水下探测

> 当前接口返回4中类型

### 接口地址：/v1/pc/detect/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注                     |
| ---------- | ---- | -------- | ------ | ------------------------ |
| projectIds | LIST | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{"projectIds": [3]}
```

### 响应

#### 200

```bash
{
    "data": [
        [
            {
                "detect": [  // 探测详情信息
                    {
                        "s_time": "2021-08-01T16:00:00Z",  // 探测时间
                        "detect_type": 2,  // 1:多波束  2:侧扫
                        "name": "断面001",  // 断面名称
                        "image_address": "http://image.yimingkeji.com/cesao/ningbo_houtanghe_2021_0525_e2w.mp4"  // 地址
                    },
                    {
                        "s_time": "2021-09-11T12:07:21Z",
                        "detect_type": 2,
                        "name": "断面002",
                        "image_address": "http://image.yimingkeji.com/cesao/ningbo_houtanghe_2021_0525_e2w.mp4"
                    }
                ],
                "id": 2,  // 水域ID
                "name": "西湖" // 水域名称
            }
        ]
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 水下探测详情页：

### 接口地址：v1/pc/detect/list/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型   | 是否必传 | 命名     | 备注 |
| ---------- | ------ | -------- | -------- | ---- |
| detectType | INT    | 否       | 水域类型 | 筛选 |
| provinceId | INT    | 否       | 省份ID   | 筛选 |
| cityId     | INT    | 否       | 市ID     | 筛选 |
| areaId     | INT    | 否       | 区域ID   | 筛选 |
| townId     | INT    | 否       | 镇ID     | 筛选 |
| villageId  | INT    | 否       | 乡ID     | 筛选 |
| watersId   | INT    | 否       | 水域ID   | 筛选 |
| sTime      | STRING | 否       | 开始时间 | 筛选 |
| eTime      | STRING | 否       | 结束时间 | 筛选 |
| projectIds | LIST   | 是       | 项目ID   |      |

### 请求示例:

```bash
{
	"projectIds": [1,2,3]
}
```

### 响应

#### 200

```bash
{
    "data": {
        "count": 2, // 总数
        "list": [
            {
                "id": 5,  // 探测ID
                "detectType": 2,  // 探测类型
                "areas": "123",  // 面积
                "distance": "123136666", // 距离
                "sTime": "1627833600.000000", // 开始时间
                "eTime": "1627920000.000000",  // 结束时间
                "name": "断面0002", // 断面名称
                "coordinateInfo": [  // 坐标信息 如果当前字段不为空,显示在水下异物那里
                    {
                        "lat": "3123",  // 纬度
                        "lng": "3123",  // 经度
                        "cTime": "2021-08-15T11:54:13Z",  // 时间
                        "id": 2,
                        "name": "暗管2"  // 名称
                    },
                    {
                        "lat": "123132",
                        "lng": "1231",
                        "cTime": "2021-08-15T11:53:57Z",
                        "id": 1,
                        "name": "暗管1"
                    }
                ],
                "imageAddress": "http://image.yimingkeji.com/cesao/ningbo_houtanghe_2021_0525_e2w.mp4",  // 视频地址
                "provinceInfo": {  // 省份信息
                    "id": 1,
                    "name": "浙江省"
                },
                "cityInfo": {
                    "id": 1,
                    "name": "杭州市"
                },
                "areaInfo": {
                    "id": 1,
                    "name": "萧山区"
                },
                "townInfo": {},
                "villageInfo": {},
                "shipInfo": { // 船相关信息
                    "id": 2,
                    "number": "0002"
                },
                "watersInfo": {  // 水域信息
                    "id": 2,
                    "name": "西湖"
                }
            }
        ],
        "links": {
            "previous": null,
            "next": null
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 安防应急-默认年份占位

### 接口地址：/v1/pc/ai_alert/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名     | 备注                     |
| ---------- | ---- | -------- | -------- | ------------------------ |
| year       | INT  | 否       | 年份筛选 | 默认当前年份             |
| projectIds | LIST | 是       | 项目ID   | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{"projectIds": [3], "year":2021}
```

### 响应

#### 200

```bash
// ai_p_id 见智能AI列表接口
{
    "data": [
        {
            "ai_p_id": 1,
            "ai_p_id__count": 51
        },
        {
            "ai_p_id": 2,
            "ai_p_id__count": 17
        },
        {
            "ai_p_id": 3,
            "ai_p_id__count": 10
        },
        {
            "ai_p_id": 4,
            "ai_p_id__count": 9
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 安防应急-日筛选

### 接口地址：/v1/pc/day/ai_alert/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型   | 是否必传 | 命名   | 备注                     |
| ---------- | ------ | -------- | ------ | ------------------------ |
| date       | STRING | 是       | 日筛选 |                          |
| projectIds | LIST   | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{"projectIds": [3], "date": "2021-08-01"}
```

### 响应

#### 200

```bash
// ai_s_id: 见智能AI列表接口
{
    "data": [
        {
            "ai_s_id__count": 12,
            "ai_s_id": 1
        },
        {
            "ai_s_id__count": 2,
            "ai_s_id": 2
        },
        {
            "ai_s_id__count": 6,
            "ai_s_id": 3
        },
        {
            "ai_s_id__count": 6,
            "ai_s_id": 4
        },
        {
            "ai_s_id__count": 4,
            "ai_s_id": 5
        },
        {
            "ai_s_id__count": 10,
            "ai_s_id": 6
        },
        {
            "ai_s_id__count": 7,
            "ai_s_id": 7
        },
        {
            "ai_s_id__count": 4,
            "ai_s_id": 8
        },
        {
            "ai_s_id__count": 8,
            "ai_s_id": 9
        },
        {
            "ai_s_id__count": 1,
            "ai_s_id": 10
        },
        {
            "ai_s_id__count": 1,
            "ai_s_id": 11
        },
        {
            "ai_s_id__count": 1,
            "ai_s_id": 12
        },
        {
            "ai_s_id__count": 1,
            "ai_s_id": 13
        },
        {
            "ai_s_id__count": 3,
            "ai_s_id": 14
        },
        {
            "ai_s_id__count": 1,
            "ai_s_id": 17
        },
        {
            "ai_s_id__count": 1,
            "ai_s_id": 18
        },
        {
            "ai_s_id__count": 2,
            "ai_s_id": 19
        },
        {
            "ai_s_id__count": 2,
            "ai_s_id": 20
        },
        {
            "ai_s_id__count": 2,
            "ai_s_id": 21
        },
        {
            "ai_s_id__count": 4,
            "ai_s_id": 22
        },
        {
            "ai_s_id__count": 6,
            "ai_s_id": 23
        },
        {
            "ai_s_id__count": 3,
            "ai_s_id": 24
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 安防应急-月筛选

### 接口地址：/v1/pc/month/ai_alert/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注                     |
| ---------- | ---- | -------- | ------ | ------------------------ |
| month      | INT  | 是       | 月     |                          |
| year       | INT  | 是       | 年     |                          |
| projectIds | LIST | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
	"projectIds": [3],
  "year": 2021,
  "month": 8
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "num": 1,  // 数量
            "s_time": "08-01"  // 日期
        },
        {
            "num": 1,
            "s_time": "08-02"
        },
        {
            "num": 4,
            "s_time": "08-06"
        },
        {
            "num": 1,
            "s_time": "08-11"
        },
        {
            "num": 1,
            "s_time": "08-14"
        },
        {
            "num": 4,
            "s_time": "08-16"
        },
        {
            "num": 1,
            "s_time": "08-18"
        },
        {
            "num": 1,
            "s_time": "08-28"
        },
        {
            "num": 1,
            "s_time": "08-29"
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 安防应急-年筛选

### 接口地址：/v1/pc/year/ai_alert/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注                     |
| ---------- | ---- | -------- | ------ | ------------------------ |
| year       | INT  | 是       | 年     |                          |
| projectIds | LIST | 是       | 项目ID | 登录成功以后返回的项目ID |

### 请求示例:

```bash
{
	"projectIds": [3],
  "year": 2021
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "num": 72,// 数量
            "s_time": "2021-07"  // 时间
        },
        {
            "num": 15,
            "s_time": "2021-08"
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 安防应急-详情

### 接口地址：/v1/pc/ai_alert/list/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型   | 是否必传 | 命名         | 备注 |
| ---------- | ------ | -------- | ------------ | ---- |
| aiPId      | INT    | 否       | 一级事件类型 | 筛选 |
| aiSId      | INT    | 否       | 二级事件类型 | 筛选 |
| aiTId      | INT    | 否       | 三级时间类型 | 筛选 |
| provinceId | INT    | 否       | 省份ID       | 筛选 |
| cityId     | INT    | 否       | 市ID         | 筛选 |
| areaId     | INT    | 否       | 区域ID       | 筛选 |
| townId     | INT    | 否       | 镇ID         | 筛选 |
| villageId  | INT    | 否       | 乡ID         | 筛选 |
| watersId   | INT    | 否       | 水域ID       | 筛选 |
| sTime      | STRING | 否       | 开始时间     | 筛选 |
| eTime      | STRING | 否       | 结束时间     | 筛选 |
| projectIds | LIST   | 是       | 项目ID       |      |

### 请求示例:

```bash
{"projectIds": [3,4]}
```

### 响应

#### 200

```bash
{
    "data": {
        "count": 10,
        "list": [
            {
                "id": 45, // 监控ID
                "address": "xxxx",  // 地址
                "lng": "1231",  // 经度
                "lat": "123", // 纬度
                "isReported": true,  // 是否审核
                "sTime": "1627747200.000000",  // 开始时间
                "eTime": "1627747200.000000", // 结束时间
                "provinceInfo": {  // 省份
                    "id": 1,
                    "name": "浙江省"
                },
                "cityInfo": {  // 城市
                    "id": 1,
                    "name": "杭州市"
                }, 
                "areaInfo": {  // 地区
                    "id": 1,
                    "name": "萧山区"
                },
                "townInfo": {},  // 镇
                "villageInfo": {},  // 乡
                "shipInfo": { // 船相关信息
                    "userName": "吕品品123",  // 运维人员
                    "userId": 1,
                    "id": 2,
                    "userMobile": "13069634826",
                    "number": "0002"
                },
                "watersInfo": {  // 水域
                    "id": 2,
                    "name": "西湖"
                },
                "userInfo": {  // 业主相关信息
                    "mobile": "13069634826",
                    "id": 1,
                    "name": "吕品品123"
                },
                "aiP_info": {  // 一级事件分类
                    "id": 3,
                    "name": "异常行为"
                }, 
                "aiS_info": {  // 二级事件分类
                    "text": "造船厂视频监控",
                    "id": 22,
                    "name": "安全生产"
                },
                "aiT_info": {  // 三级事件分类
                    "id": 86,
                    "name": "工作时间睡觉"
                }
            }
        ],
        "links": {
            "previous": null,
            "next": null
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

