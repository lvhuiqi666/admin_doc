# 智慧水域-地图辅助工具

## 登录接口：

### 接口地址：v1/pc/map/login/

### 请求方式：POST

### 请求参数：

| 参数名 | 类型   | 是否必传 | 命名   | 备注 |
| ------ | ------ | -------- | ------ | ---- |
| mobile | STRING | 是       | 手机号 |      |
| pd     | STRING | 是       | 密码   |      |

### 请求示例:

```bash
{
    "mobile": "15180892716",
    "pd": "123456"
}
```

### 响应

#### 200

```bash
{
    "data": {
        "mobile": "13069634825", // 手机号
        "roles_name": "管理员", // 角色名称
        "id": 1,  // 用户ID
        "roles": 7,  // 角色ID
        "name": "吕品品"  // 用户名称
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 获取所有水域信息:

> 用于输出水域信息时，输入框匹配信息操作。

### 接口地址：v1/pc/map/all_waters/

### 请求方式：POST

### 请求参数：

* 

### 请求示例:

* 

### 响应

#### 200

```bash
{
    "data": [
    		{
        	"number": "ZJ-PY-RPTH", // 水域编号
        	"id": 92,  // 水域ID
       	  "name": "瑞平塘河"  // 水域名称
      },
   ]
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 获取所有水域对应点位信息名称:

> 用于输出点位信息时，输入框匹配信息操作。

### 接口地址：v1/pc/map/all_waters/

### 请求方式：POST

### 请求参数：

| 参数名   | 类型 | 是否必传 | 命名   | 备注                     |
| -------- | ---- | -------- | ------ | ------------------------ |
| watersId | INT  | 是       | 水域ID | 通过获取全部水域信息接口 |

### 请求示例:

```bash
{"watersId": 85}
```

### 响应

#### 200

```bash
{
    "data": {
        "wqResult": [ // 水下探测信息
            { 
                "id": 145,  // 探测ID
                "name": "疑似暗管" // 点位名称
            },
        ], 
        "wharf": [], // 水域码头信息
        "wqDetect": [ // 水质监测信息
            {
                "id": 92,  // 监测ID
                "name": "CD01" // 监测名称
            },
        ]
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 点位查询接口列表：

### 接口地址：v1/pc/map/query_water/points/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型   | 是否必传 | 命名     | 备注         |
| ---------- | ------ | -------- | -------- | ------------ |
| watersName | STRING | 否       | 水域名称 | 支持模糊查询 |
| pointName  | STRING | 否       | 点位名称 | 支持模糊查询 |

### 请求示例:

```bash
{
    "watersName": "平宋",
    "pointName": "暗管"
}
```

### 响应

#### 200

```bash
{
    "data": {
        "wqResult": [  // 水下探测点位信息
            {
                "detect__waters__name": "平宋塘河",  // 水域名称
                "name": "疑似暗管", // 点位名称
                "number": "AG01", // 点位编号
                "lat": "27.75150863", // 纬度
                "lng": "120.5929729", // 经度
                "id": 145 // 点位ID
            },
        ],
        "wharf": [ // 水域码头信息
        		{
                "name": "上塘河",  // 码头名称
                "number": "", // 码头编号
                "device_type": 1,  // 码头类型:充电桩
                "statue": 1 , // 码头状态: 1在线、2离线、3故障
                "waters__name": "中塘河", // 水域名称
                "lat": "27.792930", // 纬度
                "lng": "120.685989", // 经度
                "id": 2  // 码头点位ID
            }
        ],
        "wqDetect": [ // 水质监测点信息
        		{
                "name": "疑似暗管01",  // 水质监测点名称
                "number": "08_132821", // 水质监测点编号
                "waters__name": "田螺峙河", //水域监测点水域信息
                "lat": "29.984287043", // 纬度
                "lng": "122.195286514", // 经度
                "id": 77 // 水质监测点ID
            },
       ]
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 更新码头点位信息：

### 接口地址：v1/pc/map/update/wharf_point/

### 请求方式：POST

### 请求参数：

| 参数名  | 类型   | 是否必传 | 命名   | 备注                            |
| ------- | ------ | -------- | ------ | ------------------------------- |
| wharfId | INT    | 是       | 码头ID | 根据查询点位信息返回的wharf字段 |
| lat     | STRING | 是       | 纬度   |                                 |
| lng     | STRING | 是       | 经度   |                                 |

### 请求示例:

```bash
{
    "wharfId": 29,
    "lat": "1",
    "lng": "1"
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 更新水质监测点位信息：

### 接口地址：v1/pc/map/update/wq_detect_point/

### 请求方式：POST

### 请求参数：

| 参数名   | 类型   | 是否必传 | 命名         | 备注                               |
| -------- | ------ | -------- | ------------ | ---------------------------------- |
| detectId | INT    | 是       | 水质监测点ID | 根据查询点位信息返回的wqDetect字段 |
| lat      | STRING | 是       | 纬度         |                                    |
| lng      | STRING | 是       | 经度         |                                    |

### 请求示例:

```bash
{
    "detectId": 125,
    "lat": "1",
    "lng": "2"
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 更新水下探测点位信息：

### 接口地址：v1/pc/map/update/wq_result_point/

### 请求方式：POST

### 请求参数：

| 参数名   | 类型   | 是否必传 | 命名           | 备注                               |
| -------- | ------ | -------- | -------------- | ---------------------------------- |
| resultId | INT    | 是       | 水下探测结果ID | 根据查询点位信息返回的wqResult字段 |
| lat      | STRING | 是       | 纬度           |                                    |
| lng      | STRING | 是       | 经度           |                                    |

### 请求示例:

```bash
{
    "resultId": 125,
    "lat": "1",
    "lng": "2"
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

