# 智慧水域-大屏-水质模块

## 水质检测任务：

### 接口地址：v1/pc/water_quality/task/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型 | 是否必传 | 命名   | 备注 |
| ---------- | ---- | -------- | ------ | ---- |
| projectIds | LIST | 是       | 项目ID |      |

### 请求示例:

```bash
{
    "projectIds": [1,2,3,4],
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "waters_id": 30,  // 水域ID
            "c_time": "2021-10-22",  // 检测日期
            "province__name": "浙江省",  // 检测省份
            "num": 2,  // 监测点位
            "waters__name": "西湖",  // 水域名称
            "province_id": 1  // 省份ID
        },
        {
            "waters_id": 31,
            "c_time": "2021-10-22",
            "province__name": "浙江省",
            "num": 1,
            "waters__name": "唐河",
            "province_id": 1
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 水质检测任务详情-定点水质：

### 接口地址：v1/pc/water_quality/fixed/point/list/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型   | 是否必传 | 命名     | 备注 |
| ---------- | ------ | -------- | -------- | ---- |
| projectIds | LIST   | 是       | 项目ID   |      |
| shipName   | STRING | 否       | 船的名称 | 筛选 |
| provinceId | INT    | 否       | 省份     | 筛选 |
| watersId   | INT    | 否       | 水域     | 筛选 |
| sTime      | STRING | 否       | 开始日期 | 筛选 |
| eTime      | STRING | 否       | 结束日期 | 筛选 |

### 请求示例:

```bash
{
    "projectIds": [1,2,3,4],
}
```

### 响应

#### 200

```bash
{
    "data": {
        "count": 2,
        "list": [
            {
                "id": 10,  // 定点水位ID
                "lng": "120.900683",  // 经度
                "lat": "30.21611",  // 纬度
                "ph": "7.19", // 
                "nh3": "0.016075216972",
                "nh4": "1.40598196393",
                "k": "0.0945891783567",
                "cod": "4.96931863727",
                "turbidity": "23.7403306613",
                "dissOxy": "78.3954008016",
                "oxySaturation": "9.97",
                "cTime": "1631666676.000000",
                "wqTs": null,
                "shipInfo": { // 船的信息
                    "id": 2,
                    "name": "测试船",
                    "number": "00022"
                },
                "watersInfo": {  // 水域信息
                    "provinceName": "浙江省",
                    "provinceId": 1,
                    "watersName": "西湖",
                    "waterQualityId": 13,
                    "watersId": 30
                }
            }
        ],
        "links": {
            "previous": null,
            "next": null
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 水质检测任务详情-动态水质：

### 接口地址：v1/pc/water_quality/dynamic/list/

### 请求方式：POST

### 请求参数：

| 参数名     | 类型   | 是否必传 | 命名           | 备注 |
| ---------- | ------ | -------- | -------------- | ---- |
| projectIds | LIST   | 是       | 项目ID         |      |
| shipName   | STRING | 否       | 船的名称       | 筛选 |
| provinceId | INT    | 否       | 省份           | 筛选 |
| watersId   | INT    | 否       | 水域           | 筛选 |
| sTime      | FLOAT  | 否       | 开始日期时间戳 | 筛选 |
| eTime      | FLOAT  | 否       | 结束日期时间戳 | 筛选 |

### 请求示例:

```bash
{
    "projectIds": [1,2,3,4],
}
```

### 响应

#### 200

```bash
{
    "data": {
        "count": 78149,
        "list": [
            {
                "height": "3.88547730446",
                "s_time": 1637228043,
                "ship": {
                    "number": "0004",
                    "id": 17,
                    "name": "QDF-0004"
                },
                "c_data": {
                    "id": 20,
                    "name": "南京市"
                },
                "wgs84_lat": "32.0413168",
                "c_time": 1637228097286.0,
                "a_data": {
                    "id": 20,
                    "name": "建邺区"
                },
                "ph": "",
                "cod": "",
                "waters": {
                    "id": 14,
                    "name": "莫愁湖"
                },
                "nh4": "",
                "nh3": "",
                "oxy_saturation": "",
                "_id": "61961e41ad0529004908bc9e",
                "p_data": {
                    "id": 2,
                    "name": "江苏省"
                },
                "k": "",
                "diss_oxy": "",
                "_cls": "wisdom_waters_service.models.DynamicWaterQuality",
                "water_quality": null,
                "chlorophy": "",
                "turbidity": "",
                "wgs84_lng": "118.7582365"
            },
        ]
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```



## 水质历史查询接口：

### 接口地址：v1/pc/history/water_quality/

### 请求方式：POST

### 请求参数：

| 参数名   | 类型   | 是否必传 | 命名     | 备注 |
| -------- | ------ | -------- | -------- | ---- |
| watersId | INT    | 是       | 水域ID   |      |
| sTime    | STRING | 是       | 开始日期 |      |
| eTime    | STRING | 是       | 结束日期 |      |

### 请求示例:

```bash
{
    "watersId": 22,
    "sTime": "2021-06-01",
    "eTime": "2021-06-17"
}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "c_time": "2021-06-16T00:00:52Z",  // 日期
            "k": "0",  // 钾离子
            "oxy_saturation": "3.07", // 溶解氧饱和度
            "diss_oxy": "40.4", // 溶解氧
            "nh4": "3.2", // nh4
            "cod": "23.9", // 化学需氧量
            "nh3": "0", // nh3
            "ph": "7.32",  // Ph
            "turbidity": "33.5", // 浊度
            "id": 24
        },
        {
            "c_time": "2021-06-15T00:28:53Z",
            "k": "0.1",
            "oxy_saturation": "0.0",
            "diss_oxy": "0",
            "nh4": "1.4",
            "cod": "65.8",
            "nh3": "0",
            "ph": "7.04",
            "turbidity": "47.5",
            "id": 23
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

