# 智慧水域-船舶接口

## 获取项目列表：

### 接口地址：v1/get/project/list/

### 请求方式：POST

### 请求参数：

* 

### 请求示例:

* 

### 响应

#### 200

```bash
{
    "data": [
        {
            "waters_id": 70, // 水域ID
            "num": "ZJ-ZS-TLZH20220607", // 项目名称
            "waters__name": "田螺峙河", // 水域名称
            "id": 76, // 项目ID
            "name": "浙江舟山田螺峙河" // 项目名称
        },
        {
            "waters_id": 69,
            "num": "ZJ-ZS-BQZH20220609",
            "waters__name": "白泉主河",
            "id": 75,
            "name": "舟山白泉主河"
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 船上传电子围栏点位：

> 注意： 
>
> 船启动时，获取项目列表,  采集完成后，将本地的点位进行去重，然后一起请求后端当前接口，上传一次即可。

### 接口地址：v1/upload/fence/point/

### 请求方式：POST

### 请求参数：

| 参数名    | 类型 | 是否必传 | 命名                 | 备注 |
| --------- | ---- | -------- | -------------------- | ---- |
| shipId    | INT  | 是       | 船的ID               |      |
| projectId | INT  | 是       | 项目ID               |      |
| detail    | LIST | 是       | 所有电子围栏点位信息 |      |

### 请求示例:

```bash
{
    "shipId": 73,  // 船的ID
    "projectId": 75, // 项目ID
    "detail": [  // 具体电子围栏点位信息
        {
            "lng": "120.6786133", // 经度
            "lat": "27.7798511", // 纬度
            "ts": 1642294675, // 当前采集时间戳
            "c_time": "2022-01-15 23:00:12"  // 当前采集字符串时间
        },
         {
            "lng": "120.6812533",
            "lat": "27.7737644",
            "ts": 1642295803,
            "c_time": "2022-01-15 23:31:09"
        }, {
            "lng": "120.6831556",
            "lat": "27.7732756",
            "ts": 1642297704,
            "c_time": "2022-01-15 23:39:11"
        },
         {
            "lng": "120.6682578",
            "lat": "27.7662844",
            "ts": 1642304422,
            "c_time": "2022-01-15 23:50:22"
        },
        {
            "lng": "120.6684533",
            "lat": "27.7662311",
            "ts": 1642307202,
            "c_time": "2022-01-16 00:09:53"
        }
    ]
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 船获取背景音乐列表：

> 每次船启动时调用当前接口，获取最新上传的背景音乐，然后缓存到本地

### 接口地址：v1/pc/ship/all_audio/

### 请求方式：GET

### 请求参数：

* 

### 请求示例:

* 

### 响应

#### 200

```bash
{
    "data": [
        {
            "content": "编辑内容", // 内容
            "url_address": "xxx.mp4",  // 背景音乐外联地址
            "id": 1, // 背景音乐ID
            "name": "编辑名称"  // 背景音乐名称
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 船获取背景音乐ID(轮训请求)：

> 船轮训请求当前接口，如果data 有数据返回，那么船进行根据ID进行查询本地音乐列表，根据ID找到对应的音乐列表后，使用外联地址进行播放背景音乐

### 接口地址：v1/pc/get_audio_play/

### 请求方式：POST

### 请求参数：

| 参数名  | 类型   | 是否必传 | 命名   | 备注 |
| ------- | ------ | -------- | ------ | ---- |
| shipNum | STRING | 是       | 船编号 |      |

### 请求示例:

```bash
{"shipNum": "0006"}
```

### 响应

#### 200

有客户端发过来的背景音乐需求返回格式如下：

```bash
{
    "data": {
        "category": 0,  // 0表示: 正常播放 、1:表示 客户端按了停止，需要将播放的进程kill掉
        "audioId": 1  // 音乐列表ID
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

无客户端发过来的背景音乐需求返回格式如下：

```bash
{
    "data": "ok",  // ok时不需要去本地查找音乐列表，因为驾驶舱没有进行音乐发送
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

