# 花桥数据对接

## 获取船实时数据：

### 接口地址：/xh/hq_ship/real_time/

### 请求方式：GET

### 请求参数：

* 无

### 响应

#### 200

```bash
{
    "data": {
        "pitchAngle": -1.5773258209228516, // 俯仰角
        "velocityEast": -0.00035086582647636533,//东向速度
        "navigationTime": 6034350,// 导航时间 
        "height": 13.934898376464844,// 高度
        "speed": 0.0013401746344045616, // 速度
        "waterDistance": 0, // 水深距离  0表示没有传感器数据
        "wgs84Longitude": 121.0802308, // wgs84 经度
        "trackId": 19, // 轨迹编号
        "socPerKilo": 2.0, // 每公里消耗电量
        "remainMiles": "None", / 剩余里程 None表示无有效数据
        "latitude": 31.325337075135742, // 纬度
        "steerControlDrive": "1", // 驾驶模式
        "waterDistanceWarn": 0,  // 水深告警  0表示无告警
        "rollingAngle": -0.8274579048156738, // 滚转角
        "angleNorth": -1.8229105472564697, // 航向角
        "socMean": 52.0,// 平均电量
        "inTrack": 0,// 是否偏航  0表示没有偏航
        "velocityUniverse": 0.00027741200756281614,// 天向速度
        "noSv": 11,// 导航卫星个数  
        "wgs84Latitude": 31.320791, // wgs84 维度
        "velocityNorth": 0.0012449314817786217,  // 北向速度
        "longitude": 121.09125693075195,  // 经度
        "shipNum": "0004",  // 船号码
        "batteryNum": 2,  // // 电池数量
        "waterQuality": {  // 水质信息
            "oxy": 6.62, // 溶解氧 单位 mg/L
            "cTime": 1627889136,  // 数据采集时间
            "chlorophy": 0.0,  // 叶绿素含量 单位 ug/L
            "K": 0.0, // K+离子 单位 mg/L
            "dissOxySaturation": 91.4, // 溶解氧饱和度 单位%
            "NH4": 1.3, // 铵离子  单位 mg/L
            "cod": 1.4, // 化学需氧量  单位 mg/L
            "NH3": 0.0,  // 氨气  单位mg/L
            "ph": 7.03,  // PH值
            "turbidity": 19.5// 浊度 单位NTU
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 水面保洁接口：

### 接口地址：/xh/hq_water_surface/list/

### 请求方式：GET

### 请求参数：

* 无

### 响应

#### 200

```bash
{
    "data": [
        {
            "rubbish_count": 188,
            "ai_type": 1
        },
        {
            "rubbish_count": 9,
            "ai_type": 3
        },
        {
            "rubbish_count": 2,
            "ai_type": 17
        },
        {
            "rubbish_count": 9,
            "ai_type": 15
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

**ai_type字段含义**:

```bash

(1, "垃圾"),
(2, "水草"),
(3, "树枝"),
(4, "死鱼"),
(5, "动物尸体"),
(6, "水质污染"),
(7, "河面油污"),
(8, "河道侵占"),
(9, "非法船只"),
(10, "扔垃圾"),
(11, "游泳"),
(12, "活体人"),
(13, "活体车"),
(14, "活体船"),
(15, "水葫芦"),
(16, "浮藻"),
(17, "蓝藻"),
(18, "落叶"),
(19, "鱼篓"),
(20, "渔网"),
(21, "飞禽尸体"),
(22, "家禽尸体"),
(23, "其他尸体"),
(24, "钓鱼"),
(25, "挖沙"),
(26, "出水明管"),
(27, "无水明管"),
(28, "船只偏航"),
(29, "堤坝缺陷")
```

## 统计接口：

### 接口地址：/xh/hq_history/garbage/

### 请求方式：GET

### 请求参数：

| 参数名 | 类型   | 是否必传 | 命名                       | 备注 |
| ------ | ------ | -------- | -------------------------- | ---- |
| type   | INT    | 是       | 1:巡河、2:垃圾(kg)、3:预警 | 筛选 |
| tab    | INT    | 是       | 1:每日、2:每周、3:每月     | 筛选 |
| sTime  | STRING | 否       | 开始时间                   | 筛选 |
| eTime  | STRING | 否       | 结束时间                   | 筛选 |

### 请求示例：

```bash
type=1&sTime=2021-08-02&eTime=2021-08-06
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "count": 2.0, // 数量
            "task_status": 1  // 1:巡河  2:垃圾  3:预警
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

