# 智慧水域-运维系统-组织架构

## 创建组织建构

### 接口地址：/v1/admin/organ/

### 请求方式：POST

### 请求参数：

| 参数名    | 类型   | 是否必传 | 命名     | 备注 |
| --------- | ------ | -------- | -------- | ---- |
| projectId | INT    | 是       | 项目ID   | 必传 |
| name      | STRING | 是       | 用户姓名 | 必传 |
| mobile    | STRING | 是       | 联系方式 |      |
| duty      | STRING | 否       | 职务     |      |
| scope     | STRING | 否       | 工作职责 |      |
| company   | STRING | 否       | 工作单位 |      |
| mark      | INT    | 是       | 标记     |      |

### 请求示例:

```bash
{
    "projectId": 64,
    "name": "xxx",
    "mobile": "130xxxxxxx",
    "duty": "xxx",
    "scope": "xxxx",
    "company": "1322",
    "mark": 1
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 编辑组织架构

### 接口地址：/v1/admin/organ/

### 请求方式：PUT

### 请求参数：

| 参数名    | 类型   | 是否必传 | 命名       | 备注 |
| --------- | ------ | -------- | ---------- | ---- |
| organId   | INT    | 是       | 组织架构ID |      |
| projectId | INT    | 是       | 项目ID     | 必传 |
| name      | STRING | 是       | 用户姓名   | 必传 |
| mobile    | STRING | 是       | 联系方式   |      |
| duty      | STRING | 否       | 职务       |      |
| scope     | STRING | 否       | 工作职责   |      |
| company   | STRING | 否       | 工作单位   |      |
| mark      | INT    | 是       | 标记       |      |

### 请求示例:

```bash
{
    "projectId": 64,
    "name": "123",
    "mobile": "1233123",
    "duty": "123",
    "scope": "123",
    "company": "12332123",
    "mark": 1,
    "organId": 17
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 获取组织架构

### 接口地址：/v1/admin/organ/

### 请求方式：GET

### 请求参数：

| 参数名  | 类型 | 是否必传 | 命名       | 备注 |
| ------- | ---- | -------- | ---------- | ---- |
| organId | INT  | 是       | 组织架构ID | 必传 |

### 请求示例:

```bash
{"organId":6}
```

### 响应

#### 200

```bash
{
    "data": [
        {
            "project__city__name": "杭州市",  // 市区
            "project__waters_id": 4,  // 水域ID
            "user_id": 5,  // 用户ID
            "project__city_id": 1,  // 市区ID
            "project__name": "项目名册",  // 项目名称
            "project__area__name": "萧山区", // 区域名称
            "project__num": "12321322132",  // 项目编号
            "project__waters__name": "洞庭湖", // 水域名称
            "project__business_type": 1,  // 业务类型
            "duty": null,  // 用户职责
            "mark": "2",  // 编辑
            "project__province_id": 1,  // 省份ID
            "project__province__name": "浙江省",  // 省份名称
            "mobile": "13069634812",  // 电话号
            "name": "lh9",  // 用户
            "project__area_id": 1, // 区域ID
            "id": 6,  // 组织ID
            "scope": null, // 工作范围
            "company": "BAT8911" // 公司
        }
    ],
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 批量删除组织架构

### 接口地址：/v1/admin/delete/organ/

### 请求方式：POST

### 请求参数：

| 参数名   | 类型 | 是否必传 | 命名       | 备注 |
| -------- | ---- | -------- | ---------- | ---- |
| organIds | LIST | 是       | 组织架构ID | 必传 |

### 请求示例:

```bash
{   
    "organIds": [6,7]
}
```

### 响应

#### 200

```bash
{
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

## 组织架构列表页

### 接口地址：/v1/admin/organ/list/

### 请求方式：POST

### 请求参数：

| 参数名       | 类型   | 是否必传 | 命名     | 备注     |
| ------------ | ------ | -------- | -------- | -------- |
| provinceId   | INT    | 否       | 省份ID   | 筛选     |
| cityId       | INT    | 否       | 市ID     | 筛选     |
| areaId       | INT    | 否       | 区域ID   | 筛选     |
| watersId     | INT    | 否       | 水域ID   | 筛选     |
| userName     | STRING | 否       | 用户姓名 | 模糊筛选 |
| businessType | INT    | 否       | 业务类型 | 筛选     |

### 请求示例:

```bash
{"projectId": 3}
```

### 响应

#### 200

```bash
// 内容同详情
{
    "data": {
        "count": 4,
        "list": [
            {
                "id": 17,
                "mark": "1",
                "provinceInfo": {
                    "id": 1,
                    "name": "浙江省"
                },
                "cityInfo": {
                    "id": 18,
                    "name": "宁波市"
                },
                "areaInfo": {
                    "id": 19,
                    "name": "鄞州区"
                },
                "projectInfo": {
                    "businessType": 4,
                    "watersId": 22,
                    "name": "浙江宁波后塘河",
                    "num": "ZJ-NB-HTH-20210524",
                    "id": 64,
                    "watersName": "后塘河"
                },
                "name": "123",
                "mobile": "1233123",
                "duty": "123",
                "scope": "123",
                "company": "12332123"
            }            
        ],
        "links": {
            "previous": null,
            "next": null
        }
    },
    "retCode": 0,
    "retMsg": "成功 | Success"
}
```

